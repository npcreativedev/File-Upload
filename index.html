<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GoFile Uploader</title>
</head>
<body>
  <h2>Upload File to GoFile</h2>
  <input type="file" id="fileInput" />
  <button onclick="upload()">Upload</button>
  <p id="status"></p>
  <p><strong>Link:</strong> <a id="link" href="#" target="_blank"></a></p>

  <script>
    async function upload() {
      const file = document.getElementById('fileInput').files[0];
      if (!file) return alert('Please choose a file');

      document.getElementById('status').innerText = 'Uploading...';

      // Step 1: Get the best server
      const serverRes = await fetch('https://api.gofile.io/getServer');
      const { data: { server } } = await serverRes.json();

      // Step 2: Upload file
      const formData = new FormData();
      formData.append('file', file);

      const uploadRes = await fetch(`https://${server}.gofile.io/uploadFile`, {
        method: 'POST',
        body: formData
      });

      const result = await uploadRes.json();

      if (result.status === 'ok') {
        const link = result.data.downloadPage;
        document.getElementById('link').href = link;
        document.getElementById('link').innerText = link;
        document.getElementById('status').innerText = '✅ Uploaded successfully!';
      } else {
        document.getElementById('status').innerText = '❌ Upload failed.';
      }
    }
  </script>
</body>
</html>
